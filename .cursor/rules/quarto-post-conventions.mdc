---
description: QMD ファイル作成時の YAML / 本文ルール（レンダリングエラー防止）
globs: scripts/by_timeSeries/quarto/posts/**/*.qmd
alwaysApply: false
---

# Quarto 投稿ファイル（.qmd）の注意事項

## YAML Frontmatter

### 非 ASCII 文字の禁止

`description` や `title` に em-dash（—）等の非 ASCII 文字を使わない。
knitr 処理後に YAML パースエラー（`did not find expected <document start>`）を起こす。

```yaml
# BAD
description: "Six risk matrices — R-multiple vs winrate"

# GOOD
description: "Six risk matrices - R-multiple vs winrate"
```

### サムネイル画像の設定（SVG / PNG 分離）

Web 一覧とX（Twitter）カードで別々の画像形式を指定する。
`thumbnail.png` は CI が `thumbnail.svg` から自動生成する。

```yaml
# Web 一覧用（ブラウザは SVG 表示可能）
image: "thumbnail.svg"

# X カード用（SVG 非対応のため PNG）
twitter-card:
  card-type: summary_large_image
  image: "thumbnail.png"
```

## 本文ルール

### 水平線には `***` を使う

`---` は YAML ドキュメント境界として誤認されるリスクがある。

```markdown
# BAD - YAML 境界と誤認される可能性
---
_This post is part of ..._

# GOOD
***
_This post is part of ..._
```

## テンプレート

新規投稿は以下のテンプレートをコピーして使用する:
- `posts/_template_weekly_review.qmd`
- `posts/_template_makeover_monday.qmd`
- `posts/_template_tidytuesday.qmd`
